"use strict";var basketCounter=document.querySelector(".header__basket-counter"),basketButton=document.querySelector(".header__basket-button"),basket=document.querySelector(".basket"),basketBackButton=document.querySelector(".basket__button"),basketList=document.querySelector(".basket__list"),basketText=document.querySelector(".basket__text"),basketIcon=document.querySelector(".basket__icon"),basketValue=document.querySelector(".basket__total--number"),basketTotalNumber=0,counter=(basketValue.textContent=basketTotalNumber+"$",0),createInput=(basketCounter.textContent=counter,function(){var t=document.createElement("input");return t.setAttribute("type","number"),t.setAttribute("min","1"),t.setAttribute("max","10"),t.setAttribute("onKeyDown","return false"),t.classList.add("product-input"),t.value=1,t}),createButtonsContainer=function(){var t=document.createElement("div");return t.classList.add("buttons-container"),t.append(createPurchaseButton(),createInput()),t},createPurchaseButton=function(){var t=document.createElement("button");return t.classList.add("purchase-button"),t.textContent="ADD TO CART",t},createProductPrice=function(t){var e=document.createElement("p");return e.classList.add("product-price"),e.textContent=t.price+"$",e},createProductName=function(t){var e=document.createElement("p");return e.classList.add("product-name"),e.textContent=t.name,e},createProductImage=function(t){var e=document.createElement("img");return e.classList.add("product-image"),e.setAttribute("src",t.image),e},createProductListItem=function(t){var e=document.createElement("li");return e.classList.add("product-list-item"),e.setAttribute("id",t.id),e.append(createProductImage(t),createProductName(t),createProductPrice(t),createButtonsContainer()),e},createProductsList=function(t){var e=document.createElement("ul");return e.classList.add("products-list"),t.forEach(function(t){e.append(createProductListItem(t))}),e},renderProducts=function(t){var e=document.querySelector("#main");return e.append(createProductsList(t)),e},purchasedProductName=(renderProducts(products),function(t){var e;return(e=document.createElement("p")).textContent=products[t].name,e.classList.add("basket__purchased-name"),e}),purchasedProductPrice=function(t,e){var r;return(r=document.createElement("p")).textContent=(products[t].price*e).toFixed(2)+"$",r.classList.add("basket__purchased-price"),r},purchasedProductImage=function(t){var e;return(e=document.createElement("img")).classList.add("product-image"),e.setAttribute("src",products[t].image),e},removeFromBasket=function(t){t=t.target.closest("li").id,t=document.getElementById(t);basketTotalNumber-=parseFloat(t.querySelector(".basket__purchased-price").textContent),basketValue.textContent=basketTotalNumber.toFixed(2)+"$",basketList.removeChild(t),2===basketList.children.length&&(basketIcon.classList.remove("in-active"),basketText.classList.remove("in-active"))},createRemoveButton=function(t){var e=document.createElement("button");return e.classList.add("basket__remove-from-cart"),e.textContent="REMOVE",e.addEventListener("click",function(t){removeFromBasket(t),counter--,basketCounter.textContent=counter;t=document.querySelector(".products-list").children[t.target.closest("li").id].querySelector("button");t.textContent="ADD TO CART",t.classList.remove("remove-from-basket")}),e},addToBasket=function(t){""!==basketList&&(basketIcon.classList.add("in-active"),basketText.classList.add("in-active"));var e=t.target.closest("li").querySelector("input").value,t=t.target.closest("li").id,r=document.createElement("li");r.setAttribute("id",products[t].id),r.classList.add("basket__purchased-item"),r.append(purchasedProductImage(t),purchasedProductPrice(t,e),purchasedProductName(t),createRemoveButton()),basketTotalNumber+=products[t].price*e,basketValue.textContent=basketTotalNumber.toFixed(2)+"$",basketList.append(r)},countProductInBasket=function(){document.querySelectorAll(".purchase-button").forEach(function(t){t.addEventListener("click",function(t){var e=t.target;("ADD TO CART"===e.textContent?(e.textContent="REMOVE",e.classList.add("remove-from-basket"),counter++,addToBasket):(e.textContent="ADD TO CART",e.classList.remove("remove-from-basket"),counter--,removeFromBasket))(t),basketCounter.textContent=counter})})},openBasket=function(){window.screen.width<=768?basket.classList.add("basket-active-mobile"):769<window.screen.width&&basket.classList.add("basket-active-desktop")},closeBasket=function(){basket.classList.remove("basket-active-mobile"),basket.classList.remove("basket-active-desktop")};basketBackButton.addEventListener("click",closeBasket),basketButton.addEventListener("click",openBasket),countProductInBasket();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJiYXNrZXRDb3VudGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmFza2V0QnV0dG9uIiwiYmFza2V0IiwiYmFza2V0QmFja0J1dHRvbiIsImJhc2tldExpc3QiLCJiYXNrZXRUZXh0IiwiYmFza2V0SWNvbiIsImJhc2tldFRvdGFsTnVtYmVyIiwiYmFza2V0VmFsdWUiLCJjb3VudGVyIiwidGV4dENvbnRlbnQiLCJpbnB1dCIsImNyZWF0ZUlucHV0IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsInZhbHVlIiwiY3JlYXRlQnV0dG9uc0NvbnRhaW5lciIsImJ1dHRvbnNDb250YWluZXIiLCJhZGQiLCJjcmVhdGVQdXJjaGFzZUJ1dHRvbiIsInB1cmNoYXNlQnV0dG9uIiwiY3JlYXRlUHJvZHVjdFByaWNlIiwicHJvZHVjdHMiLCJwcm9kdWN0UHJpY2UiLCJjcmVhdGVQcm9kdWN0TmFtZSIsInByb2R1Y3ROYW1lIiwiY3JlYXRlUHJvZHVjdEltYWdlIiwicHJvZHVjdEltYWdlIiwiaW1hZ2UiLCJjcmVhdGVQcm9kdWN0TGlzdEl0ZW0iLCJwcm9kdWN0TGlzdEl0ZW0iLCJhcHBlbmQiLCJwcm9kdWN0TGlzdCIsInByb2R1Y3QiLCJtYWluIiwicmVuZGVyUHJvZHVjdHMiLCJwdXJjaGFzZWRQcm9kdWN0TmFtZSIsInB1cmNoYXNlZFByb2R1Y3RJZCIsIm5hbWUiLCJwdXJjaGFzZWRQcm9kdWN0UHJpY2UiLCJwcm9kdWN0SW5wdXRWYWx1ZSIsInByaWNlIiwidG9GaXhlZCIsInB1cmNoYXNlZFByb2R1Y3RJbWFnZSIsInJlbW92ZUZyb21CYXNrZXQiLCJwYXJzZUZsb2F0IiwicHJvZHVjdFRvRGVsZXRlIiwiY2hpbGRyZW4iLCJyZW1vdmUiLCJsZW5ndGgiLCJjcmVhdGVSZW1vdmVCdXR0b24iLCJyZW1vdmVCdXR0b24iLCJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByb2R1Y3RzTGlzdCIsImJ0biIsInRhcmdldCIsImNsb3Nlc3QiLCJpZCIsInB1cmNoYXNlZExpc3RJdGVtIiwiY291bnRQcm9kdWN0SW5CYXNrZXQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHVyY2hhc2VCdXR0b25zIiwiZm9yRWFjaCIsImNsaWNrZWRCdG4iLCJidXR0b24iLCJhZGRUb0Jhc2tldCIsIm9wZW5CYXNrZXQiLCJ3aW5kb3ciLCJjbG9zZUJhc2tldCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsY0FBZ0JDLFNBQVNDLGNBQWMseUJBQXlCLEVBQ2hFQyxhQUFlRixTQUFTQyxjQUFjLHdCQUF3QixFQUQ5REYsT0FBQUEsU0FBZ0JDLGNBQVNDLFNBQWMsRUFDdkNDLGlCQUFlRixTQUFTQyxjQUFjLGlCQUFBLEVBQ3RDRSxXQUFTSCxTQUFTQyxjQUFjLGVBQVUsRUFDMUNHLFdBQUFBLFNBQW1CSixjQUFTQyxlQUFjLEVBQzVDSSxXQUFhTCxTQUFTQyxjQUFjLGVBQWdCLEVBQ2xESyxZQUFhTixTQUFTQyxjQUFjLHdCQUFnQixFQUNwRE0sa0JBQWFQLEVBRWZRLFNBREpDLFlBQUlBLFlBQXNCRCxrQkFBZSxJQUNyQ0EsR0FFQUUsYUFESkQsY0FBWUUsWUFBY0gsUUFDWCxXQUNmVCxJQUFBQSxFQUFjWSxTQUFBQSxjQUFxQixPQUFBLEVBU2xDLE9BUkRDLEVBQU1DLGFBQWMsT0FBZEEsUUFBQUEsRUFHTEQsRUFGTUEsYUFBUVosTUFBU2MsR0FBQUEsRUFHdkJGLEVBRktHLGFBQWEsTUFBTyxJQUFFLEVBRzNCSCxFQUZLRyxhQUFhLFlBQVksY0FBQSxFQUc5QkgsRUFGS0ksVUFBQ0QsSUFBYSxlQUFZLEVBRy9CSCxFQUZLSyxNQUFDRixFQUNBQyxDQUdQLEdBRENFLHVCQUFZLFdBQ1osSUFBQUMsRUFBQW5CLFNBQUFjLGNBQUEsS0FBQSxFQUtBLE9BSkRLLEVBQU1ELFVBQXNCRSxJQUFHLG1CQUF6QkYsRUFHTEMsRUFGTUEsT0FBbUJuQixxQkFBU2MsRUFBY0QsWUFBTSxDQUFBLEVBQ3RETSxDQUdELEVBRENF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UGhEdkMsV0FRRzZELE9BQVd2RCxDQUFjLENBUDdCLEVBQ01tRCxxQkFRTyxXQUNLOUQsU0FBQStELGlCQUFBLGtCQUFBLEVBQ1JFLFFBQUEsU0FBQUUsR0FQUkEsRUFRRUQsaUJBQVd2RCxRQUFjLFNBQUEyQyxHQVAxQixJQVFDWSxFQUFXbEQsRUFBQUEsUUFDRixnQkFSTmtELEVBUU12RCxhQVBUdUQsRUFRQXBCLFlBQW1CLFNBUG5Cb0IsRUFRRGxELFVBQUFJLElBQUEsb0JBQUEsRUFQQ1YsT0FRRFgsR0FDRHFFLGNBRURGLEVBQUF2RCxZQUFBLGNBQ0swRCxFQUFVckQsVUFBR2tDLE9BQWJtQixvQkFBbUIsRUFDeEIzRCxPQUFJNEQsR0FDSG5FLG1CQUxFbUQsQ0FBQSxFQUREdkQsY0FRTWlCLFlBQWNOLE9BQ3RCLENBQUEsQ0FDQSxDQUFBLENBQ0QsRUFDQ1AsV0FBaUIrQyxXQUNqQi9DLE9BQU9hLE9BQVVrQyxPQUFPLElBQ3hCL0MsT0FBQWEsVUFBQUksSUFBQSxzQkFBQSxFQUNpQyxJQUFsQ2hCLE9BQWlCbUQsT0FBQUEsT0FDakJyRCxPQUFBQSxVQUFhcUQsSUFBQUEsdUJBQTBCYyxDQU52QyxFQUNNRSxZQUFjLFdBQ25CcEUsT0FBT2EsVUFBVWtDLE9BQU8sc0JBQXNCLEVBQzlDL0MsT0FBT2EsVUFBVWtDLE9BQU8sdUJBQXVCLENBQ2hELEVBQ0E5QyxpQkFBaUJtRCxpQkFBaUIsUUFBU2dCLFdBQVcsRUFDdERyRSxhQUFhcUQsaUJBQWlCLFFBQVNjLFVBQVUsRUFDakRQLHFCQUFxQiIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYmFza2V0Q291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Jhc2tldC1jb3VudGVyJylcclxuY29uc3QgYmFza2V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFza2V0LWJ1dHRvbicpXHJcbmNvbnN0IGJhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXQnKVxyXG5jb25zdCBiYXNrZXRCYWNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldF9fYnV0dG9uJylcclxubGV0IGJhc2tldExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0X19saXN0JylcclxuY29uc3QgYmFza2V0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3RleHQnKVxyXG5jb25zdCBiYXNrZXRJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldF9faWNvbicpXHJcbmxldCBiYXNrZXRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3RvdGFsLS1udW1iZXInKVxyXG5sZXQgYmFza2V0VG90YWxOdW1iZXIgPSAwXHJcbmJhc2tldFZhbHVlLnRleHRDb250ZW50ID0gYmFza2V0VG90YWxOdW1iZXIgKyAnJCdcclxubGV0IGNvdW50ZXIgPSAwXHJcbmJhc2tldENvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudGVyXHJcbmNvbnN0IGNyZWF0ZUlucHV0ID0gKCkgPT4ge1xyXG5cdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxyXG5cdGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdudW1iZXInKVxyXG5cdGlucHV0LnNldEF0dHJpYnV0ZSgnbWluJywgJzEnKVxyXG5cdGlucHV0LnNldEF0dHJpYnV0ZSgnbWF4JywgJzEwJylcclxuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoJ29uS2V5RG93bicsICdyZXR1cm4gZmFsc2UnKVxyXG5cdGlucHV0LmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW5wdXQnKVxyXG5cdGlucHV0LnZhbHVlID0gMVxyXG5cdHJldHVybiBpbnB1dFxyXG59XHJcbmNvbnN0IGNyZWF0ZUJ1dHRvbnNDb250YWluZXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcblx0YnV0dG9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdidXR0b25zLWNvbnRhaW5lcicpXHJcblx0YnV0dG9uc0NvbnRhaW5lci5hcHBlbmQoY3JlYXRlUHVyY2hhc2VCdXR0b24oKSwgY3JlYXRlSW5wdXQoKSlcclxuXHRyZXR1cm4gYnV0dG9uc0NvbnRhaW5lclxyXG59XHJcbmNvbnN0IGNyZWF0ZVB1cmNoYXNlQnV0dG9uID0gKCkgPT4ge1xyXG5cdGNvbnN0IHB1cmNoYXNlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHRwdXJjaGFzZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwdXJjaGFzZS1idXR0b24nKVxyXG5cdHB1cmNoYXNlQnV0dG9uLnRleHRDb250ZW50ID0gJ0FERCBUTyBDQVJUJ1xyXG5cdHJldHVybiBwdXJjaGFzZUJ1dHRvblxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3RQcmljZSA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBwcm9kdWN0UHJpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcclxuXHRwcm9kdWN0UHJpY2UuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1wcmljZScpXHJcblx0cHJvZHVjdFByaWNlLnRleHRDb250ZW50ID0gcHJvZHVjdHMucHJpY2UgKyAnJCdcclxuXHRyZXR1cm4gcHJvZHVjdFByaWNlXHJcbn1cclxuY29uc3QgY3JlYXRlUHJvZHVjdE5hbWUgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcclxuXHRwcm9kdWN0TmFtZS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LW5hbWUnKVxyXG5cdHByb2R1Y3ROYW1lLnRleHRDb250ZW50ID0gcHJvZHVjdHMubmFtZVxyXG5cdHJldHVybiBwcm9kdWN0TmFtZVxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3RJbWFnZSA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBwcm9kdWN0SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG5cdHByb2R1Y3RJbWFnZS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlJylcclxuXHRwcm9kdWN0SW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBwcm9kdWN0cy5pbWFnZSlcclxuXHRyZXR1cm4gcHJvZHVjdEltYWdlXHJcbn1cclxuY29uc3QgY3JlYXRlUHJvZHVjdExpc3RJdGVtID0gcHJvZHVjdHMgPT4ge1xyXG5cdGNvbnN0IHByb2R1Y3RMaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJylcclxuXHRwcm9kdWN0TGlzdEl0ZW0uY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1saXN0LWl0ZW0nKVxyXG5cdHByb2R1Y3RMaXN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgcHJvZHVjdHMuaWQpXHJcblx0cHJvZHVjdExpc3RJdGVtLmFwcGVuZChcclxuXHRcdGNyZWF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0cyksXHJcblx0XHRjcmVhdGVQcm9kdWN0TmFtZShwcm9kdWN0cyksXHJcblx0XHRjcmVhdGVQcm9kdWN0UHJpY2UocHJvZHVjdHMpLFxyXG5cdFx0Y3JlYXRlQnV0dG9uc0NvbnRhaW5lcigpXHJcblx0KVxyXG5cdHJldHVybiBwcm9kdWN0TGlzdEl0ZW1cclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0c0xpc3QgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpXHJcblx0cHJvZHVjdExpc3QuY2xhc3NMaXN0LmFkZCgncHJvZHVjdHMtbGlzdCcpXHJcblx0cHJvZHVjdHMuZm9yRWFjaChwcm9kdWN0ID0+IHtcclxuXHRcdHByb2R1Y3RMaXN0LmFwcGVuZChjcmVhdGVQcm9kdWN0TGlzdEl0ZW0ocHJvZHVjdCkpXHJcblx0fSlcclxuXHRyZXR1cm4gcHJvZHVjdExpc3RcclxufVxyXG5jb25zdCByZW5kZXJQcm9kdWN0cyA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4nKVxyXG5cdG1haW4uYXBwZW5kKGNyZWF0ZVByb2R1Y3RzTGlzdChwcm9kdWN0cykpXHJcblx0cmV0dXJuIG1haW5cclxufVxyXG5yZW5kZXJQcm9kdWN0cyhwcm9kdWN0cylcclxuY29uc3QgcHVyY2hhc2VkUHJvZHVjdE5hbWUgPSBwdXJjaGFzZWRQcm9kdWN0SWQgPT4ge1xyXG5cdGNvbnN0IHB1cmNoYXNlZFByb2R1Y3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHVyY2hhc2VkUHJvZHVjdE5hbWUudGV4dENvbnRlbnQgPSBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLm5hbWVcclxuXHRwdXJjaGFzZWRQcm9kdWN0TmFtZS5jbGFzc0xpc3QuYWRkKCdiYXNrZXRfX3B1cmNoYXNlZC1uYW1lJylcclxuXHRyZXR1cm4gcHVyY2hhc2VkUHJvZHVjdE5hbWVcclxufVxyXG5jb25zdCBwdXJjaGFzZWRQcm9kdWN0UHJpY2UgPSAocHVyY2hhc2VkUHJvZHVjdElkLCBwcm9kdWN0SW5wdXRWYWx1ZSkgPT4ge1xyXG5cdGNvbnN0IHB1cmNoYXNlZFByb2R1Y3RQcmljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG5cdHB1cmNoYXNlZFByb2R1Y3RQcmljZS50ZXh0Q29udGVudCA9IChwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLnByaWNlICogcHJvZHVjdElucHV0VmFsdWUpLnRvRml4ZWQoMikgKyAnJCdcclxuXHRwdXJjaGFzZWRQcm9kdWN0UHJpY2UuY2xhc3NMaXN0LmFkZCgnYmFza2V0X19wdXJjaGFzZWQtcHJpY2UnKVxyXG5cdHJldHVybiBwdXJjaGFzZWRQcm9kdWN0UHJpY2VcclxufVxyXG5jb25zdCBwdXJjaGFzZWRQcm9kdWN0SW1hZ2UgPSBwdXJjaGFzZWRQcm9kdWN0SWQgPT4ge1xyXG5cdGNvbnN0IHB1cmNoYXNlZFByb2R1Y3RJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcblx0cHVyY2hhc2VkUHJvZHVjdEltYWdlLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW1hZ2UnKVxyXG5cdHB1cmNoYXNlZFByb2R1Y3RJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHByb2R1Y3RzW3B1cmNoYXNlZFByb2R1Y3RJZF0uaW1hZ2UpXHJcblx0cmV0dXJuIHB1cmNoYXNlZFByb2R1Y3RJbWFnZVxyXG59XHJcbmNvbnN0IHJlbW92ZUZyb21CYXNrZXQgPSBlID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0SWQgPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpLmlkXHJcblx0Y29uc3QgcHJvZHVjdFRvRGVsZXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHVyY2hhc2VkUHJvZHVjdElkKVxyXG5cdGJhc2tldFRvdGFsTnVtYmVyIC09IHBhcnNlRmxvYXQocHJvZHVjdFRvRGVsZXRlLnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3B1cmNoYXNlZC1wcmljZScpLnRleHRDb250ZW50KVxyXG5cdGJhc2tldFZhbHVlLnRleHRDb250ZW50ID0gYmFza2V0VG90YWxOdW1iZXIudG9GaXhlZCgyKSArICckJ1xyXG5cdGJhc2tldExpc3QucmVtb3ZlQ2hpbGQocHJvZHVjdFRvRGVsZXRlKVxyXG5cdGlmIChiYXNrZXRMaXN0LmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0YmFza2V0SWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdFx0YmFza2V0VGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdH1cclxufVxyXG5jb25zdCBjcmVhdGVSZW1vdmVCdXR0b24gPSBlID0+IHtcclxuXHRjb25zdCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cdHJlbW92ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiYXNrZXRfX3JlbW92ZS1mcm9tLWNhcnQnKVxyXG5cdHJlbW92ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdSRU1PVkUnXHJcblx0cmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0XHRyZW1vdmVGcm9tQmFza2V0KGUpXHJcblx0XHRjb3VudGVyLS1cclxuXHRcdGJhc2tldENvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudGVyXHJcblx0XHRjb25zdCBwcm9kdWN0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdCcpXHJcblx0XHRjb25zdCBidG4gPSBwcm9kdWN0c0xpc3QuY2hpbGRyZW5bZS50YXJnZXQuY2xvc2VzdCgnbGknKS5pZF0ucXVlcnlTZWxlY3RvcignYnV0dG9uJylcclxuXHRcdGJ0bi50ZXh0Q29udGVudCA9ICdBREQgVE8gQ0FSVCdcclxuXHRcdGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdyZW1vdmUtZnJvbS1iYXNrZXQnKVxyXG5cdH0pXHJcblx0cmV0dXJuIHJlbW92ZUJ1dHRvblxyXG59XHJcbmNvbnN0IGFkZFRvQmFza2V0ID0gZSA9PiB7XHJcblx0aWYgKGJhc2tldExpc3QgIT09ICcnKSB7XHJcblx0XHRiYXNrZXRJY29uLmNsYXNzTGlzdC5hZGQoJ2luLWFjdGl2ZScpXHJcblx0XHRiYXNrZXRUZXh0LmNsYXNzTGlzdC5hZGQoJ2luLWFjdGl2ZScpXHJcblx0fVxyXG5cdGNvbnN0IHByb2R1Y3RJbnB1dFZhbHVlID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlXHJcblx0Y29uc3QgcHVyY2hhc2VkUHJvZHVjdElkID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5pZFxyXG5cdGNvbnN0IHB1cmNoYXNlZExpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLmlkKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2Jhc2tldF9fcHVyY2hhc2VkLWl0ZW0nKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLmFwcGVuZChcclxuXHRcdHB1cmNoYXNlZFByb2R1Y3RJbWFnZShwdXJjaGFzZWRQcm9kdWN0SWQpLFxyXG5cdFx0cHVyY2hhc2VkUHJvZHVjdFByaWNlKHB1cmNoYXNlZFByb2R1Y3RJZCwgcHJvZHVjdElucHV0VmFsdWUpLFxyXG5cdFx0cHVyY2hhc2VkUHJvZHVjdE5hbWUocHVyY2hhc2VkUHJvZHVjdElkKSxcclxuXHRcdGNyZWF0ZVJlbW92ZUJ1dHRvbigpXHJcblx0KVxyXG5cdGJhc2tldFRvdGFsTnVtYmVyICs9IChwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLnByaWNlICogcHJvZHVjdElucHV0VmFsdWUpXHJcblx0YmFza2V0VmFsdWUudGV4dENvbnRlbnQgPSBiYXNrZXRUb3RhbE51bWJlci50b0ZpeGVkKDIpICsgJyQnXHJcblx0YmFza2V0TGlzdC5hcHBlbmQocHVyY2hhc2VkTGlzdEl0ZW0pXHJcbn1cclxuY29uc3QgY291bnRQcm9kdWN0SW5CYXNrZXQgPSAoKSA9PiB7XHJcblx0Y29uc3QgcHVyY2hhc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnB1cmNoYXNlLWJ1dHRvbicpXHJcblx0cHVyY2hhc2VCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuXHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0XHRjb25zdCBjbGlja2VkQnRuID0gZS50YXJnZXRcclxuXHRcdFx0aWYgKGNsaWNrZWRCdG4udGV4dENvbnRlbnQgPT09ICdBREQgVE8gQ0FSVCcpIHtcclxuXHRcdFx0XHRjbGlja2VkQnRuLnRleHRDb250ZW50ID0gJ1JFTU9WRSdcclxuXHRcdFx0XHRjbGlja2VkQnRuLmNsYXNzTGlzdC5hZGQoJ3JlbW92ZS1mcm9tLWJhc2tldCcpXHJcblx0XHRcdFx0Y291bnRlcisrXHJcblx0XHRcdFx0YWRkVG9CYXNrZXQoZSlcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjbGlja2VkQnRuLnRleHRDb250ZW50ID0gJ0FERCBUTyBDQVJUJ1xyXG5cdFx0XHRcdGNsaWNrZWRCdG4uY2xhc3NMaXN0LnJlbW92ZSgncmVtb3ZlLWZyb20tYmFza2V0JylcclxuXHRcdFx0XHRjb3VudGVyLS1cclxuXHRcdFx0XHRyZW1vdmVGcm9tQmFza2V0KGUpXHJcblx0XHRcdH1cclxuXHRcdFx0YmFza2V0Q291bnRlci50ZXh0Q29udGVudCA9IGNvdW50ZXJcclxuXHRcdH0pXHJcblx0fSlcclxufVxyXG5jb25zdCBvcGVuQmFza2V0ID0gKCkgPT4ge1xyXG5cdGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDw9IDc2OCkge1xyXG5cdFx0YmFza2V0LmNsYXNzTGlzdC5hZGQoJ2Jhc2tldC1hY3RpdmUtbW9iaWxlJylcclxuXHR9IGVsc2UgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPiA3NjkpIHtcclxuXHRcdGJhc2tldC5jbGFzc0xpc3QuYWRkKCdiYXNrZXQtYWN0aXZlLWRlc2t0b3AnKVxyXG5cdH1cclxufVxyXG5jb25zdCBjbG9zZUJhc2tldCA9ICgpID0+IHtcclxuXHRiYXNrZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmFza2V0LWFjdGl2ZS1tb2JpbGUnKVxyXG5cdGJhc2tldC5jbGFzc0xpc3QucmVtb3ZlKCdiYXNrZXQtYWN0aXZlLWRlc2t0b3AnKVxyXG59XHJcbmJhc2tldEJhY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUJhc2tldClcclxuYmFza2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkJhc2tldClcclxuY291bnRQcm9kdWN0SW5CYXNrZXQoKVxyXG4iXX0=
