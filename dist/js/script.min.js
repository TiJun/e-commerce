"use strict";var basketCounter=document.querySelector(".header__basket-counter"),basketButton=document.querySelector(".header__basket-button"),basket=document.querySelector(".basket"),basketBackButton=document.querySelector(".basket__button"),basketList=document.querySelector(".basket__list"),basketText=document.querySelector(".basket__text"),basketIcon=document.querySelector(".basket__icon"),basketValue=document.querySelector(".basket__total--number"),basketAmount=0,productsInBasket=(basketValue.textContent=basketAmount+"$",[]),counter=0,createFavoriteButton=(basketCounter.textContent=counter,function(){var t=document.createElement("button");return t.classList.add("favorite-button"),t.innerHTML='<svg class="favorite-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>',t}),createButtonsContainer=function(){var t=document.createElement("div");return t.classList.add("buttons-container"),t.append(createPurchaseButton(),createFavoriteButton()),t},createPurchaseButton=function(){var t=document.createElement("button");return t.classList.add("purchase-button"),t.textContent="ADD TO CART",t},createProductPrice=function(t){var e=document.createElement("p");return e.classList.add("product-price"),e.textContent=t.price+"$",e},createProductName=function(t){var e=document.createElement("p");return e.classList.add("product-name"),e.textContent=t.name,e},createProductImage=function(t){var e=document.createElement("img");return e.classList.add("product-image"),e.setAttribute("src",t.image),e},createProductListItem=function(t){var e=document.createElement("li");return e.classList.add("product-list-item"),e.setAttribute("data-id",t.id),e.append(createProductImage(t),createProductName(t),createProductPrice(t),createButtonsContainer()),e},createProductsList=function(t){var e=document.createElement("ul");return e.classList.add("products-list"),t.forEach(function(t){e.append(createProductListItem(t))}),e},renderProducts=function(t){var e=document.querySelector("#main");return e.append(createProductsList(t)),e},purchasedProductIdName=(renderProducts(products),function(t){var e;return(e=document.createElement("p")).textContent=products[t].name,e.classList.add("basket__purchased-name"),e}),purchasedProductIdPrice=function(t){var e;return(e=document.createElement("p")).textContent=products[t].price+"$",e.classList.add("basket__purchased-price"),e},purchasedProductIdImage=function(t){var e;return(e=document.createElement("img")).classList.add("product-image"),e.setAttribute("src",products[t].image),e},removeFromBasket=function(t){t=document.getElementById(t.target.closest("li").dataset.id);basketList.removeChild(t),2===basketList.children.length&&(basketIcon.classList.remove("in-active"),basketText.classList.remove("in-active"))},addToBasket=function(t){""!==basketList&&(basketIcon.classList.add("in-active"),basketText.classList.add("in-active"));var t=t.target.closest("li").dataset.id,e=products[t].price,a=(console.log(e),document.createElement("li"));a.setAttribute("id",products[t].id),a.classList.add("basket__purchased-item"),a.append(purchasedProductIdImage(t),purchasedProductIdPrice(t),purchasedProductIdName(t)),basketAmount+=e,basketValue.textContent=basketAmount+"$",basketList.append(a)},countProductInBasket=function(){document.querySelectorAll(".purchase-button").forEach(function(t){t.addEventListener("click",function(t){var e=t.target;("ADD TO CART"===e.textContent?(e.textContent="REMOVE",e.classList.add("remove-from-basket"),counter++,addToBasket):(e.textContent="ADD TO CART",e.classList.remove("remove-from-basket"),counter--,removeFromBasket))(t),basketCounter.textContent=counter})})},openBasket=function(){window.screen.width<=768?basket.classList.add("basket-active-mobile"):769<window.screen.width&&basket.classList.add("basket-active-desktop")},closeBasket=function(){basket.classList.remove("basket-active-mobile"),basket.classList.remove("basket-active-desktop")};basketBackButton.addEventListener("click",closeBasket),basketButton.addEventListener("click",openBasket),countProductInBasket();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJiYXNrZXRDb3VudGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmFza2V0QnV0dG9uIiwiYmFza2V0IiwiYmFza2V0QmFja0J1dHRvbiIsImJhc2tldExpc3QiLCJiYXNrZXRUZXh0IiwiYmFza2V0SWNvbiIsImJhc2tldEFtb3VudCIsImJhc2tldFZhbHVlIiwidGV4dENvbnRlbnQiLCJjb3VudGVyIiwicHJvZHVjdHNJbkJhc2tldCIsImZhdkJ1dHRvbiIsImNyZWF0ZUZhdm9yaXRlQnV0dG9uIiwiY3JlYXRlQnV0dG9uc0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJidXR0b25zQ29udGFpbmVyIiwiYXBwZW5kIiwiY2xhc3NMaXN0IiwiY3JlYXRlUHVyY2hhc2VCdXR0b24iLCJwdXJjaGFzZUJ1dHRvbiIsImNyZWF0ZVByb2R1Y3RQcmljZSIsInByb2R1Y3RzIiwicHJvZHVjdFByaWNlIiwicHJpY2UiLCJjcmVhdGVQcm9kdWN0TmFtZSIsInByb2R1Y3ROYW1lIiwibmFtZSIsImNyZWF0ZVByb2R1Y3RJbWFnZSIsInByb2R1Y3RJbWFnZSIsInNldEF0dHJpYnV0ZSIsImFkZCIsImltYWdlIiwiY3JlYXRlUHJvZHVjdExpc3RJdGVtIiwicHJvZHVjdExpc3RJdGVtIiwiaWQiLCJwcm9kdWN0TGlzdCIsImZvckVhY2giLCJwcm9kdWN0IiwicmVuZGVyUHJvZHVjdHMiLCJtYWluIiwicHVyY2hhc2VkUHJvZHVjdElkTmFtZSIsInB1cmNoYXNlZFByb2R1Y3RJZCIsInB1cmNoYXNlZFByb2R1Y3RJZFByaWNlIiwicHVyY2hhc2VkUHJvZHVjdElkSW1hZ2UiLCJyZW1vdmVGcm9tQmFza2V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0YXJnZXQiLCJkYXRhc2V0IiwicmVtb3ZlIiwiZSIsImNsb3Nlc3QiLCJyZW1vdmVDaGlsZCIsInByb2R1Y3RUb0RlbGV0ZSIsImNoaWxkcmVuIiwibGVuZ3RoIiwiYWRkVG9CYXNrZXQiLCJwdXJjaGFzZWRQcm9kdWN0UHJpY2UiLCJjb25zb2xlIiwicHVyY2hhc2VkTGlzdEl0ZW0iLCJjb3VudFByb2R1Y3RJbkJhc2tldCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGlja2VkQnRuIiwiYnV0dG9uIiwib3BlbkJhc2tldCIsIndpbmRvdyIsIndpZHRoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlQmFza2V0Il0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxjQUFnQkMsU0FBU0MsY0FBYyx5QkFBeUIsRUFDaEVDLGFBQWVGLFNBQVNDLGNBQWMsd0JBQXdCLEVBRDlERixPQUFBQSxTQUFnQkMsY0FBU0MsU0FBYyxFQUN2Q0MsaUJBQWVGLFNBQVNDLGNBQWMsaUJBQUEsRUFDdENFLFdBQVNILFNBQVNDLGNBQWMsZUFBVSxFQUMxQ0csV0FBQUEsU0FBbUJKLGNBQVNDLGVBQWMsRUFDNUNJLFdBQWFMLFNBQVNDLGNBQWMsZUFBZ0IsRUFDbERLLFlBQWFOLFNBQVNDLGNBQWMsd0JBQWdCLEVBQ3BETSxhQUFhUCxFQUVmUSxrQkFESkMsWUFBSUEsWUFBcUJELGFBQWUsSUFDcEIsSUFDcEJDLFFBQVlDLEVBRVJDLHNCQURKWixjQUFJYSxZQUFxQkQsUUFDVixXQUNmWixJQUFBQSxFQUFjVyxTQUFjQyxjQUFPLFFBQUEsRUFNbEMsT0FMREUsRUFBTUMsVUFBQUEsSUFBb0IsaUJBQXBCQSxFQUdMRCxFQUZNQSxVQUNOQSxvWUFDQUEsQ0FHRCxHQUFDRSx1QkFBQSxXQUNELElBQU1BLEVBQXNCZixTQUFHZ0IsY0FBekJELEtBQUFBLEVBSUwsT0FGQUUsRUFETUEsVUFBbUJqQixJQUFBQSxtQkFBdUIsRUFFaERpQixFQURnQkMsT0FBQ0MscUJBQWMsRUFBQUwscUJBQW9CLENBQUEsRUFDbkRHLENBRUQsRUFBQ0cscUJBQUEsV0FDRCxJQUFNQSxFQUFvQnBCLFNBQUdnQixjQUF2QkksUUFBQUEsRUFJTCxPQUZBQyxFQURNQSxVQUFpQnJCLElBQUFBLGlCQUF1QixFQUU5Q3FCLEVBRGNYLFlBQWMs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VyxFQUN0RG5FLGFBQWFrRSxpQkFBaUIsUUFBU0gsVUFBVSxFQUNqREoscUJBQXFCIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBiYXNrZXRDb3VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFza2V0LWNvdW50ZXInKVxyXG5jb25zdCBiYXNrZXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19iYXNrZXQtYnV0dG9uJylcclxuY29uc3QgYmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldCcpXHJcbmNvbnN0IGJhc2tldEJhY2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0X19idXR0b24nKVxyXG5sZXQgYmFza2V0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX2xpc3QnKVxyXG5jb25zdCBiYXNrZXRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldF9fdGV4dCcpXHJcbmNvbnN0IGJhc2tldEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0X19pY29uJylcclxubGV0IGJhc2tldFZhbHVlPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0X190b3RhbC0tbnVtYmVyJylcclxubGV0IGJhc2tldEFtb3VudCA9IDBcclxuYmFza2V0VmFsdWUudGV4dENvbnRlbnQgPSBiYXNrZXRBbW91bnQgKyAnJCdcclxubGV0IHByb2R1Y3RzSW5CYXNrZXQgPSBbXVxyXG5sZXQgY291bnRlciA9IDBcclxuYmFza2V0Q291bnRlci50ZXh0Q29udGVudCA9IGNvdW50ZXJcclxuY29uc3QgY3JlYXRlRmF2b3JpdGVCdXR0b24gPSAoKSA9PiB7XHJcblx0Y29uc3QgZmF2QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHRmYXZCdXR0b24uY2xhc3NMaXN0LmFkZCgnZmF2b3JpdGUtYnV0dG9uJylcclxuXHRmYXZCdXR0b24uaW5uZXJIVE1MID1cclxuXHRcdCc8c3ZnIGNsYXNzPVwiZmF2b3JpdGUtaWNvblwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCIjMDAwXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwiZmVhdGhlciBmZWF0aGVyLWhlYXJ0XCI+PHBhdGggZD1cIk0yMC44NCA0LjYxYTUuNSA1LjUgMCAwIDAtNy43OCAwTDEyIDUuNjdsLTEuMDYtMS4wNmE1LjUgNS41IDAgMCAwLTcuNzggNy43OGwxLjA2IDEuMDZMMTIgMjEuMjNsNy43OC03Ljc4IDEuMDYtMS4wNmE1LjUgNS41IDAgMCAwIDAtNy43OHpcIj48L3BhdGg+PC9zdmc+J1xyXG5cdHJldHVybiBmYXZCdXR0b25cclxufVxyXG5jb25zdCBjcmVhdGVCdXR0b25zQ29udGFpbmVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdGJ1dHRvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucy1jb250YWluZXInKVxyXG5cdGJ1dHRvbnNDb250YWluZXIuYXBwZW5kKGNyZWF0ZVB1cmNoYXNlQnV0dG9uKCksIGNyZWF0ZUZhdm9yaXRlQnV0dG9uKCkpXHJcblx0cmV0dXJuIGJ1dHRvbnNDb250YWluZXJcclxufVxyXG5jb25zdCBjcmVhdGVQdXJjaGFzZUJ1dHRvbiA9ICgpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblx0cHVyY2hhc2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncHVyY2hhc2UtYnV0dG9uJylcclxuXHRwdXJjaGFzZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdBREQgVE8gQ0FSVCdcclxuXHRyZXR1cm4gcHVyY2hhc2VCdXR0b25cclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0UHJpY2UgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdFByaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHJvZHVjdFByaWNlLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtcHJpY2UnKVxyXG5cdHByb2R1Y3RQcmljZS50ZXh0Q29udGVudCA9IHByb2R1Y3RzLnByaWNlICsgJyQnXHJcblx0cmV0dXJuIHByb2R1Y3RQcmljZVxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3ROYW1lID0gcHJvZHVjdHMgPT4ge1xyXG5cdGNvbnN0IHByb2R1Y3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHJvZHVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1uYW1lJylcclxuXHRwcm9kdWN0TmFtZS50ZXh0Q29udGVudCA9IHByb2R1Y3RzLm5hbWVcclxuXHRyZXR1cm4gcHJvZHVjdE5hbWVcclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0SW1hZ2UgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuXHRwcm9kdWN0SW1hZ2UuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZScpXHJcblx0cHJvZHVjdEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgcHJvZHVjdHMuaW1hZ2UpXHJcblx0cmV0dXJuIHByb2R1Y3RJbWFnZVxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3RMaXN0SXRlbSA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBwcm9kdWN0TGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpXHJcblx0cHJvZHVjdExpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtbGlzdC1pdGVtJylcclxuXHRwcm9kdWN0TGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgcHJvZHVjdHMuaWQpXHJcblx0cHJvZHVjdExpc3RJdGVtLmFwcGVuZChcclxuXHRcdGNyZWF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0cyksXHJcblx0XHRjcmVhdGVQcm9kdWN0TmFtZShwcm9kdWN0cyksXHJcblx0XHRjcmVhdGVQcm9kdWN0UHJpY2UocHJvZHVjdHMpLFxyXG5cdFx0Y3JlYXRlQnV0dG9uc0NvbnRhaW5lcigpXHJcblx0KVxyXG5cdHJldHVybiBwcm9kdWN0TGlzdEl0ZW1cclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0c0xpc3QgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpXHJcblx0cHJvZHVjdExpc3QuY2xhc3NMaXN0LmFkZCgncHJvZHVjdHMtbGlzdCcpXHJcblx0cHJvZHVjdHMuZm9yRWFjaChwcm9kdWN0ID0+IHtcclxuXHRcdHByb2R1Y3RMaXN0LmFwcGVuZChjcmVhdGVQcm9kdWN0TGlzdEl0ZW0ocHJvZHVjdCkpXHJcblx0fSlcclxuXHRyZXR1cm4gcHJvZHVjdExpc3RcclxufVxyXG5jb25zdCByZW5kZXJQcm9kdWN0cyA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21haW4nKVxyXG5cdG1haW4uYXBwZW5kKGNyZWF0ZVByb2R1Y3RzTGlzdChwcm9kdWN0cykpXHJcblx0cmV0dXJuIG1haW5cclxufVxyXG5yZW5kZXJQcm9kdWN0cyhwcm9kdWN0cylcclxuY29uc3QgcHVyY2hhc2VkUHJvZHVjdElkTmFtZSA9IChwdXJjaGFzZWRQcm9kdWN0SWQpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0SWROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHVyY2hhc2VkUHJvZHVjdElkTmFtZS50ZXh0Q29udGVudCA9IHByb2R1Y3RzW3B1cmNoYXNlZFByb2R1Y3RJZF0ubmFtZVxyXG5cdHB1cmNoYXNlZFByb2R1Y3RJZE5hbWUuY2xhc3NMaXN0LmFkZCgnYmFza2V0X19wdXJjaGFzZWQtbmFtZScpXHJcblx0cmV0dXJuIHB1cmNoYXNlZFByb2R1Y3RJZE5hbWVcclxufVxyXG5jb25zdCBwdXJjaGFzZWRQcm9kdWN0SWRQcmljZSA9IChwdXJjaGFzZWRQcm9kdWN0SWQpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0SWRQcmljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG5cdHB1cmNoYXNlZFByb2R1Y3RJZFByaWNlLnRleHRDb250ZW50ID0gcHJvZHVjdHNbcHVyY2hhc2VkUHJvZHVjdElkXS5wcmljZSArICckJ1xyXG5cdHB1cmNoYXNlZFByb2R1Y3RJZFByaWNlLmNsYXNzTGlzdC5hZGQoJ2Jhc2tldF9fcHVyY2hhc2VkLXByaWNlJylcclxuXHRyZXR1cm4gcHVyY2hhc2VkUHJvZHVjdElkUHJpY2VcclxufVxyXG5jb25zdCBwdXJjaGFzZWRQcm9kdWN0SWRJbWFnZSA9IChwdXJjaGFzZWRQcm9kdWN0SWQpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0SWRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXHJcblx0cHVyY2hhc2VkUHJvZHVjdElkSW1hZ2UuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZScpXHJcblx0cHVyY2hhc2VkUHJvZHVjdElkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLmltYWdlKVxyXG5cdHJldHVybiBwdXJjaGFzZWRQcm9kdWN0SWRJbWFnZVxyXG59XHJcbmNvbnN0IHJlbW92ZUZyb21CYXNrZXQgPSAoZSkgPT4ge1xyXG5cdGNvbnN0IHByb2R1Y3RUb0RlbGV0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pZClcclxuXHRiYXNrZXRMaXN0LnJlbW92ZUNoaWxkKHByb2R1Y3RUb0RlbGV0ZSlcclxuXHRpZihiYXNrZXRMaXN0LmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0YmFza2V0SWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdFx0YmFza2V0VGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdH1cclxufVxyXG5jb25zdCBhZGRUb0Jhc2tldCA9IChlKSA9PiB7XHJcblx0aWYoYmFza2V0TGlzdCAhPT0gJycpIHtcclxuXHRcdGJhc2tldEljb24uY2xhc3NMaXN0LmFkZCgnaW4tYWN0aXZlJylcclxuXHRcdGJhc2tldFRleHQuY2xhc3NMaXN0LmFkZCgnaW4tYWN0aXZlJylcclxuXHR9XHJcblx0Y29uc3QgcHVyY2hhc2VkUHJvZHVjdElkID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmlkXHJcblx0Y29uc3QgcHVyY2hhc2VkUHJvZHVjdFByaWNlID0gcHJvZHVjdHNbcHVyY2hhc2VkUHJvZHVjdElkXS5wcmljZVxyXG5cdGNvbnNvbGUubG9nKHB1cmNoYXNlZFByb2R1Y3RQcmljZSk7XHJcblx0Y29uc3QgcHVyY2hhc2VkTGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpXHJcblx0cHVyY2hhc2VkTGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIHByb2R1Y3RzW3B1cmNoYXNlZFByb2R1Y3RJZF0uaWQpXHJcblx0cHVyY2hhc2VkTGlzdEl0ZW0uY2xhc3NMaXN0LmFkZCgnYmFza2V0X19wdXJjaGFzZWQtaXRlbScpXHJcblx0cHVyY2hhc2VkTGlzdEl0ZW0uYXBwZW5kKFxyXG5cdHB1cmNoYXNlZFByb2R1Y3RJZEltYWdlKHB1cmNoYXNlZFByb2R1Y3RJZCksXHJcblx0cHVyY2hhc2VkUHJvZHVjdElkUHJpY2UocHVyY2hhc2VkUHJvZHVjdElkKSxcclxuXHRwdXJjaGFzZWRQcm9kdWN0SWROYW1lKHB1cmNoYXNlZFByb2R1Y3RJZClcclxuXHQpXHJcblx0YmFza2V0QW1vdW50ICs9IHB1cmNoYXNlZFByb2R1Y3RQcmljZVxyXG5cdGJhc2tldFZhbHVlLnRleHRDb250ZW50ID0gYmFza2V0QW1vdW50ICsgJyQnXHJcblx0YmFza2V0TGlzdC5hcHBlbmQocHVyY2hhc2VkTGlzdEl0ZW0pXHJcbn1cclxuY29uc3QgY291bnRQcm9kdWN0SW5CYXNrZXQgPSAoKSA9PiB7XHJcblx0Y29uc3QgcHVyY2hhc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnB1cmNoYXNlLWJ1dHRvbicpXHJcblx0cHVyY2hhc2VCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuXHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0XHRjb25zdCBjbGlja2VkQnRuID0gZS50YXJnZXRcclxuXHRcdFx0aWYgKGNsaWNrZWRCdG4udGV4dENvbnRlbnQgPT09ICdBREQgVE8gQ0FSVCcpIHtcclxuXHRcdFx0XHRjbGlja2VkQnRuLnRleHRDb250ZW50ID0gJ1JFTU9WRSdcclxuXHRcdFx0XHRjbGlja2VkQnRuLmNsYXNzTGlzdC5hZGQoJ3JlbW92ZS1mcm9tLWJhc2tldCcpXHJcblx0XHRcdFx0Y291bnRlcisrXHJcblx0XHRcdFx0YWRkVG9CYXNrZXQoZSlcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjbGlja2VkQnRuLnRleHRDb250ZW50ID0gJ0FERCBUTyBDQVJUJ1xyXG5cdFx0XHRcdGNsaWNrZWRCdG4uY2xhc3NMaXN0LnJlbW92ZSgncmVtb3ZlLWZyb20tYmFza2V0JylcclxuXHRcdFx0XHRjb3VudGVyLS1cclxuXHRcdFx0XHRyZW1vdmVGcm9tQmFza2V0KGUpXHJcblx0XHRcdH1cclxuXHRcdFx0YmFza2V0Q291bnRlci50ZXh0Q29udGVudCA9IGNvdW50ZXJcclxuXHRcdH0pXHJcblx0fSlcclxufVxyXG5jb25zdCBvcGVuQmFza2V0ID0gKCkgPT4ge1xyXG5cdGlmKHdpbmRvdy5zY3JlZW4ud2lkdGggPD0gNzY4KSB7XHJcblx0XHRiYXNrZXQuY2xhc3NMaXN0LmFkZCgnYmFza2V0LWFjdGl2ZS1tb2JpbGUnKVxyXG5cdH1lbHNlIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoID4gNzY5KSB7XHJcblx0XHRiYXNrZXQuY2xhc3NMaXN0LmFkZCgnYmFza2V0LWFjdGl2ZS1kZXNrdG9wJylcclxuXHR9XHJcbn1cclxuY29uc3QgY2xvc2VCYXNrZXQgPSAoKSA9PiB7XHJcblx0YmFza2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Jhc2tldC1hY3RpdmUtbW9iaWxlJylcclxuXHRiYXNrZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmFza2V0LWFjdGl2ZS1kZXNrdG9wJylcclxufVxyXG5iYXNrZXRCYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VCYXNrZXQpXHJcbmJhc2tldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5CYXNrZXQpXHJcbmNvdW50UHJvZHVjdEluQmFza2V0KCkiXX0=
