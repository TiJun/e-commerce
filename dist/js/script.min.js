"use strict";var basketCounter=document.querySelector(".header__basket-counter"),basketButton=document.querySelector(".header__basket-button"),basket=document.querySelector(".basket"),basketBackButton=document.querySelector(".basket__button"),basketList=document.querySelector(".basket__list"),basketText=document.querySelector(".basket__text"),basketIcon=document.querySelector(".basket__icon"),basketValue=document.querySelector(".basket__total--number"),basketTotalNumber=0,counter=(basketValue.textContent=basketTotalNumber+"$",0),createInput=(basketCounter.textContent=counter,function(){var a=document.createElement("input");return a.classList.add("product-input"),a.value=1,a.addEventListener("keydown",function(t){var e=a.closest("div").querySelector("button");"0"===t.key?(e.setAttribute("disabled","true"),e.classList.add("disabled-button")):(e.setAttribute("disabled","false"),e.classList.remove("disabled-button"))}),a}),createButtonsContainer=function(){var t=document.createElement("div");return t.classList.add("buttons-container"),t.append(createPurchaseButton(),createInput()),t},createPurchaseButton=function(){var t=document.createElement("button");return t.classList.add("purchase-button"),t.textContent="ADD TO CART",t},createProductPrice=function(t){var e=document.createElement("p");return e.classList.add("product-price"),e.textContent=t.price+"$",e},createProductName=function(t){var e=document.createElement("p");return e.classList.add("product-name"),e.textContent=t.name,e},createProductImage=function(t){var e=document.createElement("img");return e.classList.add("product-image"),e.setAttribute("src",t.image),e},createProductListItem=function(t){var e=document.createElement("li");return e.classList.add("product-list-item"),e.setAttribute("id",t.id),e.append(createProductImage(t),createProductName(t),createProductPrice(t),createButtonsContainer()),e},createProductsList=function(t){var e=document.createElement("ul");return e.classList.add("products-list"),t.forEach(function(t){e.append(createProductListItem(t))}),e},renderProducts=function(t){var e=document.querySelector("#main");return e.append(createProductsList(t)),e},purchasedProductName=(renderProducts(products),function(t){var e;return(e=document.createElement("p")).textContent=products[t].name,e.classList.add("basket__purchased-name"),e}),purchasedProductPrice=function(t){var e;return(e=document.createElement("p")).textContent=products[t].price+"$",e.classList.add("basket__purchased-price"),e},purchasedProductImage=function(t){var e;return(e=document.createElement("img")).classList.add("product-image"),e.setAttribute("src",products[t].image),e},removeFromBasket=function(t){var t=t.target.closest("li").id,e=products[t].price,t=document.getElementById(t);basketTotalNumber-=e,basketValue.textContent=basketTotalNumber.toFixed(2)+"$",basketList.removeChild(t),2===basketList.children.length&&(basketIcon.classList.remove("in-active"),basketText.classList.remove("in-active"))},createRemoveButton=function(t){var e=document.createElement("button");return e.classList.add("basket__remove-from-cart"),e.textContent="REMOVE",e.addEventListener("click",function(t){removeFromBasket(t),counter--,basketCounter.textContent=counter;t=document.querySelector(".products-list").children[t.target.closest("li").id].querySelector("button");t.textContent="ADD TO CART",t.classList.remove("remove-from-basket")}),e},addToBasket=function(t){""!==basketList&&(basketIcon.classList.add("in-active"),basketText.classList.add("in-active"));var e=t.target.closest("li").querySelector("input").value,t=t.target.closest("li").id,a=document.createElement("li");a.setAttribute("id",products[t].id),a.classList.add("basket__purchased-item"),a.append(purchasedProductImage(t),purchasedProductPrice(t),purchasedProductName(t),createRemoveButton()),basketTotalNumber+=products[t].price*e,basketValue.textContent=basketTotalNumber.toFixed(2)+"$",basketList.append(a)},countProductInBasket=function(){document.querySelectorAll(".purchase-button").forEach(function(t){t.addEventListener("click",function(t){var e=t.target;("ADD TO CART"===e.textContent?(e.textContent="REMOVE",e.classList.add("remove-from-basket"),counter++,addToBasket):(e.textContent="ADD TO CART",e.classList.remove("remove-from-basket"),counter--,removeFromBasket))(t),basketCounter.textContent=counter})})},openBasket=function(){window.screen.width<=768?basket.classList.add("basket-active-mobile"):769<window.screen.width&&basket.classList.add("basket-active-desktop")},closeBasket=function(){basket.classList.remove("basket-active-mobile"),basket.classList.remove("basket-active-desktop")};basketBackButton.addEventListener("click",closeBasket),basketButton.addEventListener("click",openBasket),countProductInBasket();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJiYXNrZXRDb3VudGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmFza2V0QnV0dG9uIiwiYmFza2V0IiwiYmFza2V0QmFja0J1dHRvbiIsImJhc2tldExpc3QiLCJiYXNrZXRUZXh0IiwiYmFza2V0SWNvbiIsImJhc2tldFRvdGFsTnVtYmVyIiwiYmFza2V0VmFsdWUiLCJjb3VudGVyIiwidGV4dENvbnRlbnQiLCJpbnB1dCIsImNyZWF0ZUlucHV0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ2YWx1ZSIsImNsb3Nlc3QiLCJrZXkiLCJhZGRUb0NhcnRCdXR0b24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjcmVhdGVCdXR0b25zQ29udGFpbmVyIiwiYnV0dG9uc0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVQdXJjaGFzZUJ1dHRvbiIsInB1cmNoYXNlQnV0dG9uIiwiY3JlYXRlUHJvZHVjdFByaWNlIiwicHJvZHVjdHMiLCJwcm9kdWN0UHJpY2UiLCJjcmVhdGVQcm9kdWN0TmFtZSIsInByb2R1Y3ROYW1lIiwiY3JlYXRlUHJvZHVjdEltYWdlIiwicHJvZHVjdEltYWdlIiwiaW1hZ2UiLCJjcmVhdGVQcm9kdWN0TGlzdEl0ZW0iLCJwcm9kdWN0TGlzdEl0ZW0iLCJhcHBlbmQiLCJzZXRBdHRyaWJ1dGUiLCJwcm9kdWN0TGlzdCIsInByb2R1Y3QiLCJtYWluIiwicmVuZGVyUHJvZHVjdHMiLCJwdXJjaGFzZWRQcm9kdWN0TmFtZSIsInB1cmNoYXNlZFByb2R1Y3RJZCIsIm5hbWUiLCJwdXJjaGFzZWRQcm9kdWN0UHJpY2UiLCJwcmljZSIsInB1cmNoYXNlZFByb2R1Y3RJbWFnZSIsInJlbW92ZUZyb21CYXNrZXQiLCJwcm9kdWN0VG9EZWxldGUiLCJwdXJjaGFzZWRQcm9kdWN0UHJpY2VWYWx1ZSIsImlkIiwiY2hpbGRyZW4iLCJ0b0ZpeGVkIiwibGVuZ3RoIiwiY3JlYXRlUmVtb3ZlQnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwicHJvZHVjdHNMaXN0IiwiYnRuIiwidGFyZ2V0IiwicHJvZHVjdElucHV0VmFsdWUiLCJwdXJjaGFzZWRMaXN0SXRlbSIsImNvdW50UHJvZHVjdEluQmFza2V0IiwicXVlcnlTZWxlY3RvckFsbCIsInB1cmNoYXNlQnV0dG9ucyIsImZvckVhY2giLCJjbGlja2VkQnRuIiwiYnV0dG9uIiwiYWRkVG9CYXNrZXQiLCJvcGVuQmFza2V0Iiwid2luZG93IiwiY2xvc2VCYXNrZXQiXSwibWFwcGluZ3MiOiJhQUFBLElBQU1BLGNBQWdCQyxTQUFTQyxjQUFjLHlCQUF5QixFQUNoRUMsYUFBZUYsU0FBU0MsY0FBYyx3QkFBd0IsRUFEOURGLE9BQUFBLFNBQWdCQyxjQUFTQyxTQUFjLEVBQ3ZDQyxpQkFBZUYsU0FBU0MsY0FBYyxpQkFBQSxFQUN0Q0UsV0FBU0gsU0FBU0MsY0FBYyxlQUFVLEVBQzFDRyxXQUFBQSxTQUFtQkosY0FBU0MsZUFBYyxFQUM1Q0ksV0FBYUwsU0FBU0MsY0FBYyxlQUFnQixFQUNsREssWUFBYU4sU0FBU0MsY0FBYyx3QkFBZ0IsRUFDcERNLGtCQUFhUCxFQUVmUSxTQURKQyxZQUFJQSxZQUFzQkQsa0JBQWUsSUFDckNBLEdBRUFFLGFBREpELGNBQVlFLFlBQWNILFFBQ1gsV0FDZlQsSUFBQUEsRUFBY1ksU0FBQUEsY0FBcUIsT0FBQSxFQWVsQyxPQWREQyxFQUFNQyxVQUFXQyxJQUFHLGVBQWRELEVBR0xELEVBRk1BLE1BQVFaLEVBR2RZLEVBRktHLGlCQUFlLFVBQUEsU0FBQUMsR0FDcEJKLElBQU1LLEVBQVNMLEVBQUFNLFFBQUEsS0FBQSxFQUFBakIsY0FBQSxRQUFBLEVBQ1RjLE1BQU5ILEVBQUtPLEtBR0hDLEVBRktBLGFBQXdCRixXQUFRLE1BQU9qQixFQUc1Q21CLEVBRllDLFVBQUtQLElBQUEsaUJBQUEsSUFJakJNLEVBRkFBLGFBQTBCTixXQUFJLE9BQUEsRUFHOUJNLEVBRktDLFVBQUFDLE9BQUEsaUJBQUEsRUFJUCxDQUFD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QkFBMEJGLENBQXBCbUIsRUFDTHBCLHFCQUFxQkMsQ0FBWW9CLEVBQ2pDQyxtQkFBZ0JDLENBUGhCLEVBQ0EzRCxtQkFRcUJRLFNBQVE2QixHQUFBRyxNQUFBYyxFQVA3QnJELFlBUU0yRCxZQUFXekQsa0JBQWdCNEMsUUFBZSxDQUFBLEVBQUEsSUFQaERsRCxXQVFHK0QsT0FBV3pELENBQWMsQ0FQN0IsRUFDTXFELHFCQVFPLFdBQ0toRSxTQUFBaUUsaUJBQUEsa0JBQUEsRUFDUkUsUUFBQSxTQUFBRSxHQVBSQSxFQVFFRCxpQkFBV3pELFFBQWMsU0FBQUssR0FQMUIsSUFRQ29ELEVBQVcvQyxFQUFBQSxRQUNGLGdCQVJOK0MsRUFRTXpELGFBUFR5RCxFQVFBbEIsWUFBbUIsU0FQbkJrQixFQVFEL0MsVUFBQVAsSUFBQSxvQkFBQSxFQVBDSixPQVFEWCxHQUNEdUUsY0FFREYsRUFBQXpELFlBQUEsY0FDSzRELEVBQVVsRCxVQUFHQyxPQUFiaUQsb0JBQW1CLEVBQ3hCN0QsT0FBSThELEdBQ0hyRSxtQkFMRWEsQ0FBQSxFQUREakIsY0FRTXNCLFlBQWNYLE9BQ3RCLENBQUEsQ0FDQSxDQUFBLENBQ0QsRUFDQ1AsV0FBaUJtQixXQUNqQm5CLE9BQU9rQixPQUFVQyxPQUFPLElBQ3hCbkIsT0FBQWtCLFVBQUFQLElBQUEsc0JBQUEsRUFDaUMsSUFBbENWLE9BQWlCVyxPQUFBQSxPQUNqQmIsT0FBQUEsVUFBYWEsSUFBQUEsdUJBQTBCd0QsQ0FOdkMsRUFDTUUsWUFBYyxXQUNuQnRFLE9BQU9rQixVQUFVQyxPQUFPLHNCQUFzQixFQUM5Q25CLE9BQU9rQixVQUFVQyxPQUFPLHVCQUF1QixDQUNoRCxFQUNBbEIsaUJBQWlCVyxpQkFBaUIsUUFBUzBELFdBQVcsRUFDdER2RSxhQUFhYSxpQkFBaUIsUUFBU3dELFVBQVUsRUFDakRQLHFCQUFxQiIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYmFza2V0Q291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Jhc2tldC1jb3VudGVyJylcclxuY29uc3QgYmFza2V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYmFza2V0LWJ1dHRvbicpXHJcbmNvbnN0IGJhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXQnKVxyXG5jb25zdCBiYXNrZXRCYWNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldF9fYnV0dG9uJylcclxubGV0IGJhc2tldExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0X19saXN0JylcclxuY29uc3QgYmFza2V0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3RleHQnKVxyXG5jb25zdCBiYXNrZXRJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldF9faWNvbicpXHJcbmxldCBiYXNrZXRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXRfX3RvdGFsLS1udW1iZXInKVxyXG5sZXQgYmFza2V0VG90YWxOdW1iZXIgPSAwXHJcbmJhc2tldFZhbHVlLnRleHRDb250ZW50ID0gYmFza2V0VG90YWxOdW1iZXIgKyAnJCdcclxubGV0IGNvdW50ZXIgPSAwXHJcbmJhc2tldENvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudGVyXHJcbmNvbnN0IGNyZWF0ZUlucHV0ID0gKCkgPT4ge1xyXG5cdGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxyXG5cdGlucHV0LmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtaW5wdXQnKVxyXG5cdGlucHV0LnZhbHVlID0gMVxyXG5cdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0Y29uc3QgYWRkVG9DYXJ0QnV0dG9uID0gaW5wdXQuY2xvc2VzdCgnZGl2JykucXVlcnlTZWxlY3RvcignYnV0dG9uJylcclxuXHRcdGlmKGUua2V5ID09PSAnMCcpIHtcclxuXHRcdFx0YWRkVG9DYXJ0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xyXG5cdFx0XHRhZGRUb0NhcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQtYnV0dG9uJylcclxuXHRcdH1lbHNlIHtcclxuXHRcdFx0YWRkVG9DYXJ0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZmFsc2UnKTtcclxuXHRcdFx0YWRkVG9DYXJ0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkLWJ1dHRvbicpXHJcblx0XHR9XHJcblx0fSlcclxuXHRyZXR1cm4gaW5wdXRcclxufVxyXG5jb25zdCBjcmVhdGVCdXR0b25zQ29udGFpbmVyID0gKCkgPT4ge1xyXG5cdGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdGJ1dHRvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnV0dG9ucy1jb250YWluZXInKVxyXG5cdGJ1dHRvbnNDb250YWluZXIuYXBwZW5kKGNyZWF0ZVB1cmNoYXNlQnV0dG9uKCksIGNyZWF0ZUlucHV0KCkpXHJcblx0cmV0dXJuIGJ1dHRvbnNDb250YWluZXJcclxufVxyXG5jb25zdCBjcmVhdGVQdXJjaGFzZUJ1dHRvbiA9ICgpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblx0cHVyY2hhc2VCdXR0b24uY2xhc3NMaXN0LmFkZCgncHVyY2hhc2UtYnV0dG9uJylcclxuXHRwdXJjaGFzZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdBREQgVE8gQ0FSVCdcclxuXHRyZXR1cm4gcHVyY2hhc2VCdXR0b25cclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0UHJpY2UgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdFByaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHJvZHVjdFByaWNlLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtcHJpY2UnKVxyXG5cdHByb2R1Y3RQcmljZS50ZXh0Q29udGVudCA9IHByb2R1Y3RzLnByaWNlICsgJyQnXHJcblx0cmV0dXJuIHByb2R1Y3RQcmljZVxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3ROYW1lID0gcHJvZHVjdHMgPT4ge1xyXG5cdGNvbnN0IHByb2R1Y3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcblx0cHJvZHVjdE5hbWUuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1uYW1lJylcclxuXHRwcm9kdWN0TmFtZS50ZXh0Q29udGVudCA9IHByb2R1Y3RzLm5hbWVcclxuXHRyZXR1cm4gcHJvZHVjdE5hbWVcclxufVxyXG5jb25zdCBjcmVhdGVQcm9kdWN0SW1hZ2UgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgcHJvZHVjdEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuXHRwcm9kdWN0SW1hZ2UuY2xhc3NMaXN0LmFkZCgncHJvZHVjdC1pbWFnZScpXHJcblx0cHJvZHVjdEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgcHJvZHVjdHMuaW1hZ2UpXHJcblx0cmV0dXJuIHByb2R1Y3RJbWFnZVxyXG59XHJcbmNvbnN0IGNyZWF0ZVByb2R1Y3RMaXN0SXRlbSA9IHByb2R1Y3RzID0+IHtcclxuXHRjb25zdCBwcm9kdWN0TGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpXHJcblx0cHJvZHVjdExpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3QtbGlzdC1pdGVtJylcclxuXHRwcm9kdWN0TGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIHByb2R1Y3RzLmlkKVxyXG5cdHByb2R1Y3RMaXN0SXRlbS5hcHBlbmQoXHJcblx0XHRjcmVhdGVQcm9kdWN0SW1hZ2UocHJvZHVjdHMpLFxyXG5cdFx0Y3JlYXRlUHJvZHVjdE5hbWUocHJvZHVjdHMpLFxyXG5cdFx0Y3JlYXRlUHJvZHVjdFByaWNlKHByb2R1Y3RzKSxcclxuXHRcdGNyZWF0ZUJ1dHRvbnNDb250YWluZXIoKVxyXG5cdClcclxuXHRyZXR1cm4gcHJvZHVjdExpc3RJdGVtXHJcbn1cclxuY29uc3QgY3JlYXRlUHJvZHVjdHNMaXN0ID0gcHJvZHVjdHMgPT4ge1xyXG5cdGNvbnN0IHByb2R1Y3RMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKVxyXG5cdHByb2R1Y3RMaXN0LmNsYXNzTGlzdC5hZGQoJ3Byb2R1Y3RzLWxpc3QnKVxyXG5cdHByb2R1Y3RzLmZvckVhY2gocHJvZHVjdCA9PiB7XHJcblx0XHRwcm9kdWN0TGlzdC5hcHBlbmQoY3JlYXRlUHJvZHVjdExpc3RJdGVtKHByb2R1Y3QpKVxyXG5cdH0pXHJcblx0cmV0dXJuIHByb2R1Y3RMaXN0XHJcbn1cclxuY29uc3QgcmVuZGVyUHJvZHVjdHMgPSBwcm9kdWN0cyA9PiB7XHJcblx0Y29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluJylcclxuXHRtYWluLmFwcGVuZChjcmVhdGVQcm9kdWN0c0xpc3QocHJvZHVjdHMpKVxyXG5cdHJldHVybiBtYWluXHJcbn1cclxucmVuZGVyUHJvZHVjdHMocHJvZHVjdHMpXHJcbmNvbnN0IHB1cmNoYXNlZFByb2R1Y3ROYW1lID0gcHVyY2hhc2VkUHJvZHVjdElkID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG5cdHB1cmNoYXNlZFByb2R1Y3ROYW1lLnRleHRDb250ZW50ID0gcHJvZHVjdHNbcHVyY2hhc2VkUHJvZHVjdElkXS5uYW1lXHJcblx0cHVyY2hhc2VkUHJvZHVjdE5hbWUuY2xhc3NMaXN0LmFkZCgnYmFza2V0X19wdXJjaGFzZWQtbmFtZScpXHJcblx0cmV0dXJuIHB1cmNoYXNlZFByb2R1Y3ROYW1lXHJcbn1cclxuY29uc3QgcHVyY2hhc2VkUHJvZHVjdFByaWNlID0gcHVyY2hhc2VkUHJvZHVjdElkID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0UHJpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcclxuXHRwdXJjaGFzZWRQcm9kdWN0UHJpY2UudGV4dENvbnRlbnQgPSBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLnByaWNlICsgJyQnXHJcblx0cHVyY2hhc2VkUHJvZHVjdFByaWNlLmNsYXNzTGlzdC5hZGQoJ2Jhc2tldF9fcHVyY2hhc2VkLXByaWNlJylcclxuXHRyZXR1cm4gcHVyY2hhc2VkUHJvZHVjdFByaWNlXHJcbn1cclxuY29uc3QgcHVyY2hhc2VkUHJvZHVjdEltYWdlID0gcHVyY2hhc2VkUHJvZHVjdElkID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZWRQcm9kdWN0SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG5cdHB1cmNoYXNlZFByb2R1Y3RJbWFnZS5jbGFzc0xpc3QuYWRkKCdwcm9kdWN0LWltYWdlJylcclxuXHRwdXJjaGFzZWRQcm9kdWN0SW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLmltYWdlKVxyXG5cdHJldHVybiBwdXJjaGFzZWRQcm9kdWN0SW1hZ2VcclxufVxyXG5jb25zdCByZW1vdmVGcm9tQmFza2V0ID0gZSA9PiB7XHJcblx0Y29uc3QgcHVyY2hhc2VkUHJvZHVjdElkID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5pZFxyXG5cdGNvbnN0IHB1cmNoYXNlZFByb2R1Y3RQcmljZVZhbHVlID0gcHJvZHVjdHNbcHVyY2hhc2VkUHJvZHVjdElkXS5wcmljZVxyXG5cdGNvbnN0IHByb2R1Y3RUb0RlbGV0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHB1cmNoYXNlZFByb2R1Y3RJZClcclxuXHRiYXNrZXRUb3RhbE51bWJlciAtPSBwdXJjaGFzZWRQcm9kdWN0UHJpY2VWYWx1ZVxyXG5cdGJhc2tldFZhbHVlLnRleHRDb250ZW50ID0gYmFza2V0VG90YWxOdW1iZXIudG9GaXhlZCgyKSArICckJ1xyXG5cdGJhc2tldExpc3QucmVtb3ZlQ2hpbGQocHJvZHVjdFRvRGVsZXRlKVxyXG5cdGlmIChiYXNrZXRMaXN0LmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0YmFza2V0SWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdFx0YmFza2V0VGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdpbi1hY3RpdmUnKVxyXG5cdH1cclxufVxyXG5jb25zdCBjcmVhdGVSZW1vdmVCdXR0b24gPSBlID0+IHtcclxuXHRjb25zdCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cdHJlbW92ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdiYXNrZXRfX3JlbW92ZS1mcm9tLWNhcnQnKVxyXG5cdHJlbW92ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdSRU1PVkUnXHJcblx0cmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0XHRyZW1vdmVGcm9tQmFza2V0KGUpXHJcblx0XHRjb3VudGVyLS1cclxuXHRcdGJhc2tldENvdW50ZXIudGV4dENvbnRlbnQgPSBjb3VudGVyXHJcblx0XHRjb25zdCBwcm9kdWN0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdHMtbGlzdCcpXHJcblx0XHRjb25zdCBidG4gPSBwcm9kdWN0c0xpc3QuY2hpbGRyZW5bZS50YXJnZXQuY2xvc2VzdCgnbGknKS5pZF0ucXVlcnlTZWxlY3RvcignYnV0dG9uJylcclxuXHRcdGJ0bi50ZXh0Q29udGVudCA9ICdBREQgVE8gQ0FSVCdcclxuXHRcdGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdyZW1vdmUtZnJvbS1iYXNrZXQnKVxyXG5cdH0pXHJcblx0cmV0dXJuIHJlbW92ZUJ1dHRvblxyXG59XHJcbmNvbnN0IGFkZFRvQmFza2V0ID0gZSA9PiB7XHJcblx0aWYgKGJhc2tldExpc3QgIT09ICcnKSB7XHJcblx0XHRiYXNrZXRJY29uLmNsYXNzTGlzdC5hZGQoJ2luLWFjdGl2ZScpXHJcblx0XHRiYXNrZXRUZXh0LmNsYXNzTGlzdC5hZGQoJ2luLWFjdGl2ZScpXHJcblx0fVxyXG5cdGNvbnN0IHByb2R1Y3RJbnB1dFZhbHVlID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlXHJcblx0Y29uc3QgcHVyY2hhc2VkUHJvZHVjdElkID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKS5pZFxyXG5cdGNvbnN0IHB1cmNoYXNlZExpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBwcm9kdWN0c1twdXJjaGFzZWRQcm9kdWN0SWRdLmlkKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ2Jhc2tldF9fcHVyY2hhc2VkLWl0ZW0nKVxyXG5cdHB1cmNoYXNlZExpc3RJdGVtLmFwcGVuZChcclxuXHRcdHB1cmNoYXNlZFByb2R1Y3RJbWFnZShwdXJjaGFzZWRQcm9kdWN0SWQpLFxyXG5cdFx0cHVyY2hhc2VkUHJvZHVjdFByaWNlKHB1cmNoYXNlZFByb2R1Y3RJZCksXHJcblx0XHRwdXJjaGFzZWRQcm9kdWN0TmFtZShwdXJjaGFzZWRQcm9kdWN0SWQpLFxyXG5cdFx0Y3JlYXRlUmVtb3ZlQnV0dG9uKClcclxuXHQpXHJcblx0YmFza2V0VG90YWxOdW1iZXIgKz0gKHByb2R1Y3RzW3B1cmNoYXNlZFByb2R1Y3RJZF0ucHJpY2UgKiBwcm9kdWN0SW5wdXRWYWx1ZSlcclxuXHRiYXNrZXRWYWx1ZS50ZXh0Q29udGVudCA9IGJhc2tldFRvdGFsTnVtYmVyLnRvRml4ZWQoMikgKyAnJCdcclxuXHRiYXNrZXRMaXN0LmFwcGVuZChwdXJjaGFzZWRMaXN0SXRlbSlcclxufVxyXG5jb25zdCBjb3VudFByb2R1Y3RJbkJhc2tldCA9ICgpID0+IHtcclxuXHRjb25zdCBwdXJjaGFzZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHVyY2hhc2UtYnV0dG9uJylcclxuXHRwdXJjaGFzZUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG5cdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcblx0XHRcdGNvbnN0IGNsaWNrZWRCdG4gPSBlLnRhcmdldFxyXG5cdFx0XHRpZiAoY2xpY2tlZEJ0bi50ZXh0Q29udGVudCA9PT0gJ0FERCBUTyBDQVJUJykge1xyXG5cdFx0XHRcdGNsaWNrZWRCdG4udGV4dENvbnRlbnQgPSAnUkVNT1ZFJ1xyXG5cdFx0XHRcdGNsaWNrZWRCdG4uY2xhc3NMaXN0LmFkZCgncmVtb3ZlLWZyb20tYmFza2V0JylcclxuXHRcdFx0XHRjb3VudGVyKytcclxuXHRcdFx0XHRhZGRUb0Jhc2tldChlKVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNsaWNrZWRCdG4udGV4dENvbnRlbnQgPSAnQUREIFRPIENBUlQnXHJcblx0XHRcdFx0Y2xpY2tlZEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdyZW1vdmUtZnJvbS1iYXNrZXQnKVxyXG5cdFx0XHRcdGNvdW50ZXItLVxyXG5cdFx0XHRcdHJlbW92ZUZyb21CYXNrZXQoZSlcclxuXHRcdFx0fVxyXG5cdFx0XHRiYXNrZXRDb3VudGVyLnRleHRDb250ZW50ID0gY291bnRlclxyXG5cdFx0fSlcclxuXHR9KVxyXG59XHJcbmNvbnN0IG9wZW5CYXNrZXQgPSAoKSA9PiB7XHJcblx0aWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPD0gNzY4KSB7XHJcblx0XHRiYXNrZXQuY2xhc3NMaXN0LmFkZCgnYmFza2V0LWFjdGl2ZS1tb2JpbGUnKVxyXG5cdH0gZWxzZSBpZiAod2luZG93LnNjcmVlbi53aWR0aCA+IDc2OSkge1xyXG5cdFx0YmFza2V0LmNsYXNzTGlzdC5hZGQoJ2Jhc2tldC1hY3RpdmUtZGVza3RvcCcpXHJcblx0fVxyXG59XHJcbmNvbnN0IGNsb3NlQmFza2V0ID0gKCkgPT4ge1xyXG5cdGJhc2tldC5jbGFzc0xpc3QucmVtb3ZlKCdiYXNrZXQtYWN0aXZlLW1vYmlsZScpXHJcblx0YmFza2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Jhc2tldC1hY3RpdmUtZGVza3RvcCcpXHJcbn1cclxuYmFza2V0QmFja0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQmFza2V0KVxyXG5iYXNrZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQmFza2V0KVxyXG5jb3VudFByb2R1Y3RJbkJhc2tldCgpXHJcbiJdfQ==
